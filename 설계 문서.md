# 아기고래 쿠아 게임 설계 문서

## 📋 프로젝트 개요

### 게임 컨셉
- **장르**: 2D 액션 생존 게임
- **플랫폼**: 웹 브라우저 (HTML5 Canvas)
- **타겟**: 전연령층 캐주얼 게이머
- **핵심 메커니즘**: 약육강식 생존, 단계적 성장

### 게임 목표
플레이어는 작은 아기고래 쿠아를 조작하여 작은 물고기를 먹으며 성장하고, 큰 적들을 피해 레벨 10까지 달성하는 것이 목표입니다.

## 🎮 게임플레이 설계

### 핵심 루프
1. **이동** → 2. **먹이 탐색** → 3. **적 회피** → 4. **성장** → 5. **레벨업** → 1번으로 순환

### 조작 방식
- **방향키/WASD**: ↑↓←→ 또는 WASD 쿠아 이동
- **스페이스바**: 재시작 (게임오버/승리 시)
- **ESC키**: 일시정지/재개

### 승리/패배 조건
- **승리**: 레벨 10 달성
- **패배**: 적 물고기나 상어와 충돌

## 🐋 게임 오브젝트 설계

### 1. 플레이어 캐릭터 (쿠아)
```javascript
player = {
    x: 200,           // 중앙 시작
    y: 200,
    radius: 15,       // 초기 크기
    speed: 3,         // 이동 속도
    color: "#4A90E2", // 파란색
    level: 1,
    score: 0,
    isInvincible: false,
    invincibleTime: 0
}
```

**성장 공식**: `새로운 크기 = 15 + (레벨-1) * 3 + 먹은_먹이_수`

### 2. 먹이 (작은 물고기)
```javascript
food = {
    x: Math.random() * 380 + 10,  // 랜덤 위치
    y: Math.random() * 380 + 10,
    radius: 5,
    color: "#FF6B6B",             // 빨간색
    value: 10                     // 점수
}
```

**생성 규칙**: 
- 초기 20개 (화면 크기 확장으로 증가)
- 화면 네 방향(상하좌우)에서 자연스럽게 등장
- 이동 방향을 향해 얼굴 방향 설정
- 화면 밖으로 이동 시 자연스럽게 소멸

### 3. 적 물고기
```javascript
enemy = {
    x: Math.random() * 300 + 50,
    y: Math.random() * 300 + 50,
    radius: 25,
    speed: 1,                     // 느린 이동
    color: "#2C3E50",            // 검은색
    directionX: Math.random() * 2 - 1,  // -1 ~ 1
    directionY: Math.random() * 2 - 1
}
```

**AI 패턴**: 
- 화면 네 방향에서 등장하여 직선 이동
- 이동 방향을 향해 얼굴 방향 자동 조정
- 화면 밖으로 이동 시 자연스럽게 제거

### 4. 상어 (8레벨부터)
```javascript
shark = {
    x: 50,
    y: 50,
    size: 30,
    speed: 1.5,
    color: "#708090",            // 회색
    isActive: false
}
```

**AI 패턴**: 
- 플레이어 추적 (벡터 기반 이동)
- 이동 방향에 따른 상어 모양 회전
- 레벨별 상어 수량 조절 (8레벨:1마리, 9레벨:2마리, 10레벨:3마리)

### 5. 특수 아이템 (무적 아이템)
```javascript
powerup = {
    x: Math.random() * 360 + 20,
    y: Math.random() * 360 + 20,
    radius: 8,
    color: "#FF69B4",            // 분홍색
    duration: 3000,              // 3초 무적
    spawnChance: 0.1             // 10% 확률
}
```

## 🎨 비주얼 설계

### 화면 구성
```
┌─────────────────────────────────────────────────┐
│ Score: 1250  Level: 7  🎵 효과음: ON        │ ← UI 바
├─────────────────────────────────────────────────┤
│                                                 │
│    🔴→    🐋→    🔴→   ⚡                     │
│                                                 │
│  ⚫↓      🔴↗    ⚫↓    🦈→                   │ ← 게임 영역
│                                                 │ (800x760px)
│     🔴←           🔴↖       ⚫↑               │
│                                                 │
├─────────────────────────────────────────────────┤
│              ●●●○○○○○○○ 7/10                │ ← 레벨 진행도
└─────────────────────────────────────────────────┘
```

### 색상 팔레트
- **배경**: `#E8F4FD` (연한 바다색)
- **쿠아**: `#4A90E2` (파란색)
- **먹이**: `#FF6B6B` (빨간색)
- **적**: `#2C3E50` (어두운 회색)
- **상어**: `#708090` (슬레이트 회색)
- **무적템**: `#FF69B4` (핫핑크)
- **UI 텍스트**: `#2C3E50`

### 캐릭터 디테일
**쿠아 (원형 + 방향성)**:
- 이동 방향에 따른 꼬리 표시
- 게임 상태별 표정 변화 (:> 행복, :< 슬픔)
- 부드러운 떠다니는 애니메이션
- 크기 변화에 따른 동적 스케일링

**물고기 (원형 + 방향성)**:
- 이동 방향을 향한 얼굴 방향
- 색상별 구분 (일반: 빨강, 보너스: 금색)
- 자연스러운 화면 진입/퇴장

**상어 (삼각형 + 추적)**:
- 플레이어 추적 시 회전
- 이동 방향에 따른 모양 조정
- 위협적인 회색 톤

## ⚙️ 기술적 구현 설계

### 파일 구조
```
baby-whale-cua/
├── index.html        (메인 게임 파일)
├── README.md         (게임 설명)
└── screenshot.png    (선택사항)
```

### 핵심 함수 설계

#### 1. 게임 초기화
```javascript
function initGame() {
    // 캔버스 설정
    // 플레이어 초기화
    // 먹이 생성
    // 적 생성
    // 이벤트 리스너 등록
}
```

#### 2. 게임 루프
```javascript
function gameLoop() {
    update();    // 게임 상태 업데이트
    draw();      // 화면 렌더링
    requestAnimationFrame(gameLoop);
}
```

#### 3. 충돌 감지
```javascript
function checkCollision(obj1, obj2) {
    const dx = obj1.x - obj2.x;
    const dy = obj1.y - obj2.y;
    const distance = Math.sqrt(dx * dx + dy * dy);
    return distance < (obj1.radius + obj2.radius);
}
```

#### 4. 게임 상태 관리
```javascript
const gameState = {
    PLAYING: 'playing',
    GAME_OVER: 'gameOver',
    VICTORY: 'victory',
    PAUSED: 'paused'
};
```

### 성능 최적화
- **오브젝트 풀링**: 먹이와 적을 재사용
- **렌더링 최적화**: 변경된 영역만 다시 그리기
- **충돌 감지 최적화**: 거리 기반 사전 필터링

## 📊 게임 밸런싱

### 난이도 곡선 (최종)
| 레벨 | 먹이 생성빈도 | 적 스폰빈도 | 먹이 속도 | 상어 수 | 특별 요소 |
|------|---------------|-------------|-----------|---------|-----------|
| 1-2  | 1.5초마다     | 3.3초마다   | 1.0x      | 0마리   | 기본 플레이 |
| 3-4  | 1.3초마다     | 2.8초마다   | 1.05x     | 0마리   | 적 증가 |
| 5-7  | 1.1초마다     | 2.3초마다   | 1.1x      | 0마리   | 무적템/황금물고기 |
| 8    | 0.9초마다     | 1.8초마다   | 1.15x     | 1마리   | 상어 등장! |
| 9    | 0.7초마다     | 1.5초마다   | 1.2x      | 2마리   | 상어 증가 |
| 10   | 0.5초마다     | 1.3초마다   | 1.25x     | 3마리   | 최종 보스급 |

### 점수 시스템
- **먹이**: +10점
- **레벨업**: +50점 보너스 (먹이 20개마다)
- **무적템**: +20점
- **콤보 보너스**: 5개 연속 먹으면 +25점 추가

## 🔧 개발 우선순위

### Phase 1 (MVP - 1일차)
1. ✅ 기본 이동 시스템
2. ✅ 먹이 시스템
3. ✅ 크기 증가
4. ✅ 점수 표시

### Phase 2 (기본 게임 - 1일차)
1. ✅ 적 물고기 추가
2. ✅ 충돌 감지
3. ✅ 게임오버 시스템
4. ✅ 레벨 시스템

### Phase 3 (완성도 향상 - 2일차)
1. ✅ 상어 시스템 (레벨별 스폰)
2. ✅ 특수 아이템 (무적, 보너스 피시)
3. ✅ 비주얼 개선 (방향성, 애니메이션)
4. ✅ 사운드 효과 (Web Audio API)
5. ✅ UI 개선 (레벨 인디케이터, 일시정지)
6. ✅ 4방향 스폰 시스템

## 🐛 예상 이슈 및 해결방안

### 이슈 1: 성능 저하
**원인**: 너무 많은 오브젝트 생성
**해결**: 오브젝트 풀링 적용, 최대 오브젝트 수 제한

### 이슈 2: 충돌 감지 오류
**원인**: 부동소수점 연산 오차
**해결**: 충돌 여백 적용, Math.floor 사용

### 이슈 3: 게임 밸런스
**원인**: 너무 쉽거나 어려움
**해결**: 플레이테스트 기반 수치 조정

## 📱 확장 가능성

### 추후 추가 기능
- **멀티플레이**: 실시간 대전 모드
- **아이템**: 속도 증가, 크기 축소 등
- **스킨**: 다양한 캐릭터 스킨
- **리더보드**: 온라인 점수 저장
- **모바일**: 터치 조작 지원

## 🎯 성공 지표
- **완성도**: 모든 레벨 클리어 가능
- **재미도**: 평균 플레이 시간 5분 이상
- **안정성**: 버그 없는 게임플레이
- **성능**: 60FPS 유지
